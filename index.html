<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="None">
  
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>Quick start - PyTezos</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="css/theme.css" type="text/css" />
  <link rel="stylesheet" href="css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Quick start";
    var mkdocs_page_input_path = "index.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="." class="icon icon-home"> PyTezos</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1 current">
		
    <a class="current" href=".">Quick start</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#introduction">Introduction</a></li>
    

    <li class="toctree-l2"><a href="#requirements">Requirements</a></li>
    

    <li class="toctree-l2"><a href="#installation">Installation</a></li>
    

    <li class="toctree-l2"><a href="#set-key-and-rpc-node">Set key and RPC node</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#faucet-account">Faucet account</a></li>
        
            <li><a class="toctree-l3" href="#sandboxed-mode">Sandboxed mode</a></li>
        
        </ul>
    

    <li class="toctree-l2"><a href="#activate-account">Activate account</a></li>
    

    <li class="toctree-l2"><a href="#reveal-public-key">Reveal public key</a></li>
    

    <li class="toctree-l2"><a href="#originate-contract">Originate contract</a></li>
    

    <li class="toctree-l2"><a href="#access-storage">Access storage</a></li>
    

    <li class="toctree-l2"><a href="#bigmap-lookup">BigMap lookup</a></li>
    

    <li class="toctree-l2"><a href="#call-entrypoint">Call entrypoint</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="guide/">Developer guide</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href=".">PyTezos</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".">Docs</a> &raquo;</li>
    
      
    
    <li>Quick start</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="introduction">Introduction</h2>
<p>PyTezos library is a Python toolset for Tezos blockchain, including work with keys, signatures, contracts, operations,
RPC query builder, and a high-level interface for smart contract interaction. It can be used to build a full-fledged
application, but also it's perfect for doing researches in Jupyter interactive notebooks.
In this quick start guide, we'll go through the main concepts and inspect one of the common use cases.</p>
<h2 id="requirements">Requirements</h2>
<p>First of all you'll probably need to install cryptographic libraries in your system.</p>
<p><em>Linux</em></p>
<p>Use apt or your favourite package manager:</p>
<pre><code>$ sudo apt install libsodium-dev libsecp256k1-dev libgmp-dev
</code></pre>

<p><em>MacOS</em></p>
<p>Use homebrew:</p>
<pre><code>$ brew tap cuber/homebrew-libsecp256k1
$ brew install libsodium libsecp256k1 gmp
</code></pre>

<p><em>Windows</em></p>
<p>The recommended way is to use WSL and then follow the instructions for Linux,
but if you feel lucky you can try to install natively:</p>
<ol>
<li>Install MinGW from <a href="https://osdn.net/projects/mingw/">https://osdn.net/projects/mingw/</a></li>
<li>Make sure <code>C:\MinGW\bin</code> is added to your <code>PATH</code></li>
<li>Download the latest libsodium-X.Y.Z-msvc.zip from <a href="https://download.libsodium.org/libsodium/releases/">https://download.libsodium.org/libsodium/releases/</a>.</li>
<li>Extract the Win64/Release/v143/dynamic/libsodium.dll from the zip file</li>
<li>Copy libsodium.dll to C:\Windows\System32\libsodium.dll</li>
</ol>
<h2 id="installation">Installation</h2>
<p>In console:</p>
<pre><code>$ pip install pytezos[crypto]
</code></pre>

<p>In Google Colab notebook:</p>
<pre><code class="python">&gt;&gt;&gt; !apt install libsodium-dev libsecp256k1-dev libgmp-dev
&gt;&gt;&gt; !pip install pytezos[crypto]
[RESTART RUNTIME]
</code></pre>

<p>That's it! You can open Python console or Jupyter notebook and get to the next step.</p>
<h2 id="set-key-and-rpc-node">Set key and RPC node</h2>
<p>All active interaction with the blockchain starts with the PyTezosClient:</p>
<pre><code class="python">&gt;&gt;&gt; from pytezos import pytezos
&gt;&gt;&gt; pytezos
&lt;pytezos.client.PyTezosClient object at 0x7f904cf339e8&gt;

Properties
.key  # tz1grSQDByRpnVs7sPtaprNZRp531ZKz6Jmm
.shell  # https://tezos-dev.cryptonomic-infra.tech/ (alphanet)

Helpers
.account()
.activate_account()
.ballot()
.contract()
.delegation()
.double_baking_evidence()
.double_endorsement_evidence()
.endorsement()
.operation()
.operation_group()
.origination()
.proposals()
.reveal()
.seed_nonce_revelation()
.transaction()
.using()
</code></pre>

<p>This is one of the cool features in the interactive mode: aside from the autocomplete and call docstrings,
you can see the list of available methods for class, or list of arguments and return value for a particular methods.
We are interested in <code>using</code> method, which is responsible for setting up manager key and RPC connection.</p>
<pre><code class="python">&gt;&gt;&gt; pytezos.using
&lt;function Interop.using at 0x7fe5d2232840&gt;

Change current rpc endpoint and account (private key)
:param shell: one of 'alphanet', 'mainnet', 'zeronet', RPC node uri, or instance of `ShellQuery`
:param key: base58 encoded key, path to the faucet file, alias from tezos-client, or instance of `Key`
:return: A copy of current object with changes applied
</code></pre>

<p>Note, that by default <code>pytezos</code> is initialized with <code>alphanet</code> and a predefined private key for demo purpose,
so you can start to interact immediately, but it's highly recommended to use your own key. Let's do that!</p>
<h3 id="faucet-account">Faucet account</h3>
<p>Go to the <a href="https://faucet.tzalpha.net/">https://faucet.tzalpha.net/</a> and download key file.
Then configure the client (we can leave <code>shell</code> parameter empty, but we will set it explicitly for better understanding)</p>
<pre><code class="python">&gt;&gt;&gt; pytezos = pytezos.using(
...     key='~/Downloads/tz1cnQZXoznhduu4MVWfJF6GSyP6mMHMbbWa.json',
...     shell='alphanet')
</code></pre>

<p>Public available RPC providers are available at <code>pytezos.rpc</code>:</p>
<pre><code class="python">&gt;&gt;&gt; from pytezos.rpc import tulip
&gt;&gt;&gt; tulip
&lt;pytezos.rpc.RpcProvider object at 0x7f6f56ad77b8&gt;

Networks
.mainnet  # https://rpc.tulip.tools/mainnet/
.alphanet  # https://rpc.tulip.tools/alphanet/
.zeronet  # https://rpc.tulip.tools/zeronet/
</code></pre>

<h3 id="sandboxed-mode">Sandboxed mode</h3>
<p>Accounts are pre-created in Sandboxed mode, this shows how to find the secret keys:</p>
<pre><code>$ grep SECRET src/bin_client/tezos-init-sandboxed-client.sh
export BOOTSTRAP1_SECRET=&quot;unencrypted:edsk3gUfUPyBSfrS9CCgmCiQsTCHGkviBDusMxDJstFtojtc1zcpsh&quot;
export BOOTSTRAP2_SECRET=&quot;unencrypted:edsk39qAm1fiMjgmPkw1EgQYkMzkJezLNewd7PLNHTkr6w9XA2zdfo&quot;
export BOOTSTRAP3_SECRET=&quot;unencrypted:edsk4ArLQgBTLWG5FJmnGnT689VKoqhXwmDPBuGx3z4cvwU9MmrPZZ&quot;
export BOOTSTRAP4_SECRET=&quot;unencrypted:edsk2uqQB9AY4FvioK2YMdfmyMrer5R8mGFyuaLLFfSRo8EoyNdht3&quot;
export BOOTSTRAP5_SECRET=&quot;unencrypted:edsk4QLrcijEffxV31gGdN2HU7UpyJjA8drFoNcmnB28n89YjPNRFm&quot;
export ACTIVATOR_SECRET=&quot;unencrypted:edsk31vznjHSSpGExDMHYASz45VZqXN4DPxvsa4hAyY8dHM28cZzp6&quot;
</code></pre>

<p>Use one of these unencrypted private keys to connect to the sandbox:</p>
<pre><code>&gt;&gt;&gt; from pytezos import pytezos
&gt;&gt;&gt; pytezos.using(shell='http://localhost:18731', key='edsk3gUfUPyBSfrS9CCgmCiQsTCHGkviBDusMxDJstFtojtc1zcpsh')
&lt;pytezos.client.PyTezosClient object at 0x7f2c2d78da10&gt;

Properties
.key  # tz1KqTpEZ7Yob7QbPE4Hy4Wo8fHG8LhKxZSx
.shell  # http://localhost:18731 ()
</code></pre>

<h2 id="activate-account">Activate account</h2>
<p>In order to start using our faucet account we need to claim balance.</p>
<pre><code class="python">&gt;&gt;&gt; pytezos.activate_account
&lt;function ContentMixin.activate_account at 0x7f6f555e5400&gt;

Activate recommended allocations for contributions to the TF fundraiser.
More info https://activate.tezos.com/
:param pkh: Public key hash, leave empty for autocomplete
:param activation_code: Secret code from pdf, leave empty for autocomplete
:return: dict or OperationGroup
</code></pre>

<p>Cool! We can just leave all fields empty and let PyTezos do all the work. There are two autocomplete function available:
<code>fill</code> and <code>autofill</code>. The only difference is that <code>autofill</code> simulates the operation and sets precise values for fee
and gas/storage limits.</p>
<pre><code class="python">&gt;&gt;&gt; pytezos.activate_account().autofill()
&lt;pytezos.operation.group.OperationGroup object at 0x7f291b7074e0&gt;

Properties
.key  # tz1cnQZXoznhduu4MVWfJF6GSyP6mMHMbbWa
.shell  # https://tezos-dev.cryptonomic-infra.tech/ (alphanet)

Payload
{'branch': 'BL5UtKR4ysFLwcK2ign1h2KoZLJY88zd1vzWUZPzto9iEJqUj1d',
 'contents': [{'kind': 'activate_account',
               'pkh': 'tz1cnQZXoznhduu4MVWfJF6GSyP6mMHMbbWa',
               'secret': 'e8d47034af5ea23a9613dba219f8b4a792b22c5f'}],
 'protocol': 'Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd',
 'signature': None}

Helpers
.activate_account()
.autofill()
.ballot()
.binary_payload()
.delegation()
.double_baking_evidence()
.double_endorsement_evidence()
.endorsement()
.fill()
.forge()
.hash()
.inject()
.json_payload()
.operation()
.origination()
.preapply()
.proposals()
.reveal()
.run()
.seed_nonce_revelation()
.sign()
.transaction()
.using()
</code></pre>

<p>Have you noticed that operation helpers are still available? We can easily chain operations but we cannot for example
put <code>activate_account</code> and <code>reveal</code> together because they are from different validation passes.
Ok, let's sign and preapply operation to see what's going to happen:</p>
<pre><code class="python">&gt;&gt;&gt; pytezos.activate_account().fill().sign().preapply()
[{'contents': [{'kind': 'activate_account',
    'pkh': 'tz1cnQZXoznhduu4MVWfJF6GSyP6mMHMbbWa',
    'secret': 'e8d47034af5ea23a9613dba219f8b4a792b22c5f',
    'metadata': {'balance_updates': [{'kind': 'contract',
       'contract': 'tz1cnQZXoznhduu4MVWfJF6GSyP6mMHMbbWa',
       'change': '10848740286'}]}}],
  'signature': 'sigRg96wY6mxLKJ7jaTrVcXzABqhyEa4J1Ji5rGPKPVHv2YugViGfeH1b7qu7eavhhEGoASqffwjnH2fr46oBXVZrMWC6ZFg'}]
</code></pre>

<p>Everything looks good! Ready to inject the operation.</p>
<pre><code class="python">&gt;&gt;&gt; pytezos.activate_account().fill().sign().inject()
'oo77zoEsa9RuA7NubhvckM8NBNta8dUbL4e5GuhXmqnZ9XQGK5k'
</code></pre>

<p>We can search our operation in the node mempool to check what status it has:</p>
<pre><code class="python">&gt;&gt;&gt; pytezos.shell.mempool.pending_operations['oo77zoEsa9RuA7NubhvckM8NBNta8dUbL4e5GuhXmqnZ9XQGK5k']
{'status': 'applied',
 'hash': 'oo77zoEsa9RuA7NubhvckM8NBNta8dUbL4e5GuhXmqnZ9XQGK5k',
 'branch': 'BMdgSQxnGGTXuvGp7qrgnM2pMu16dS9Hdjq9UbdHGxzxfKfVR75',
 'contents': [{'kind': 'activate_account',
   'pkh': 'tz1cnQZXoznhduu4MVWfJF6GSyP6mMHMbbWa',
   'secret': 'e8d47034af5ea23a9613dba219f8b4a792b22c5f'}],
 'signature': 'sigbMMUu6h9vAxoM7ZZdwttDk2CcgpwbmCrFjSTQBtTsoLFYNdz85wCKQBMZ2ZMEVrBnt61XGZXyWuuDDbp7WepjHgR6DTrT'}

&gt;&gt;&gt; pytezos.account()
{'manager': 'tz1cnQZXoznhduu4MVWfJF6GSyP6mMHMbbWa',
 'balance': '10848740286',
 'spendable': True,
 'delegate': {'setable': False},
 'counter': '715917'}
</code></pre>

<p>Yay! We have claimed our account balance.</p>
<h2 id="reveal-public-key">Reveal public key</h2>
<pre><code class="python">&gt;&gt;&gt; pytezos.reveal().autofill().sign().inject()
'oo3TzPdNhtz5nmE9nL2yGLqwUzSfmb1vjTpu8wFkX5CTKLV67AE'
</code></pre>

<p>We can also search for operation by hash if we know exact block level or that it was injected recently:</p>
<pre><code class="python">&gt;&gt;&gt; pytezos.shell.blocks[580244].operations['oo3TzPdNhtz5nmE9nL2yGLqwUzSfmb1vjTpu8wFkX5CTKLV67AE']
&lt;pytezos.rpc.protocol.OperationQuery object at 0x7f70650925c0&gt;

Properties
.path  # /chains/main/blocks/580244/operations/3/16 (cached)
.node  # https://tezos-dev.cryptonomic-infra.tech/ (alphanet)

()
The `m-th` operation in the `n-th` validation pass of the block.
:return: Object

Helpers
.unsigned()

&gt;&gt;&gt; pytezos.shell.blocks[-20:].find_operation('oo3TzPdNhtz5nmE9nL2yGLqwUzSfmb1vjTpu8wFkX5CTKLV67AE')
{'protocol': 'Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd',
 'chain_id': 'NetXgtSLGNJvNye',
 'hash': 'oo3TzPdNhtz5nmE9nL2yGLqwUzSfmb1vjTpu8wFkX5CTKLV67AE',
 'branch': 'BLdKQLeV5FaPspBLP6J7Tx5xs2XRRH7pJGnXhwEW1uKz9PGBF8H',
 'contents': [{'kind': 'reveal',
   'source': 'tz1cnQZXoznhduu4MVWfJF6GSyP6mMHMbbWa',
   'fee': '1261',
   'counter': '715918',
   'gas_limit': '10000',
   'storage_limit': '0',
   'public_key': 'edpktn9Xg5TaBJ9j6gs1X4AAsQR43zxzmaVNdyerq2PxTy7dUfN3X8',
   'metadata': {'balance_updates': [{'kind': 'contract',
      'contract': 'tz1cnQZXoznhduu4MVWfJF6GSyP6mMHMbbWa',
      'change': '-1261'},
     {'kind': 'freezer',
      'category': 'fees',
      'delegate': 'tz3gN8NTLNLJg5KRsUU47NHNVHbdhcFXjjaB',
      'cycle': 283,
      'change': '1261'}],
    'operation_result': {'status': 'applied', 'consumed_gas': '10000'}}}],
 'signature': 'sigjzUVPWuFKxmMizHfMUgjqXpo2cqNEHjgRDykqwWiot2129KRWCanZjytUfxFWSDwpNSjkakmWqzhxLwNNcBcQQWJ5mAsW'}
</code></pre>

<h2 id="originate-contract">Originate contract</h2>
<p>Now we can do something interesting. Let's deploy a Michelson smart contract! First we need to load data, in this
tutorial we will get it from Michelson source file. There are plenty of available methods, but we'are interested in
<code>script</code> which gives us payload for origination.</p>
<pre><code class="python">&gt;&gt;&gt; from pytezos import Contract
&gt;&gt;&gt; contract = Contract.from_file('~/Documents/demo_contract.tz')
&gt;&gt;&gt; contract.script
&lt;function Contract.script at 0x7fe01c0d9c80&gt;

Generate script for contract origination
:param storage: Python object, leave None to generate empty
:return: {&quot;code&quot;: $Micheline, &quot;storage&quot;: $Micheline}
</code></pre>

<p>PyTezos can generate empty storage based on the type description. This is a small part of the high-level interface
functionality we will further learn.</p>
<pre><code class="python">&gt;&gt;&gt; pytezos.origination(script=contract.script()).autofill().sign().inject()
'op3ZRdR6LjmA8AeNEjKEimr2uQeAWwXSXEftUBiTVx4k86Rw66m'

&gt;&gt;&gt; opg = pytezos.shell.blocks[-5:].find_operation('op3ZRdR6LjmA8AeNEjKEimr2uQeAWwXSXEftUBiTVx4k86Rw66m')
&gt;&gt;&gt; contract_id = opg['contents'][0]['metadata']['operation_result']['originated_contracts'][0]
&gt;&gt;&gt; contract_id
'KT1RX74ty3TqBfU6pBs7ce3uV7PLBrUEav6X'
</code></pre>

<h2 id="access-storage">Access storage</h2>
<p>Let's play with <a href="https://better-call.dev/alpha/KT1HnvV5Z53naoh51jYvPF7w168nW8nfyx5v/operations">KT1HnvV5Z53naoh51jYvPF7w168nW8nfyx5v</a>
as it has BigMap entries, named entrypoints, and non-trivial data scheme.</p>
<pre><code class="python">&gt;&gt;&gt; ci = pytezos.contract('KT1HnvV5Z53naoh51jYvPF7w168nW8nfyx5v')
&gt;&gt;&gt; ci
&lt;pytezos.michelson.interface.ContractInterface object at 0x7f8bbb11c748&gt;

Properties
.key -&gt; tz1cnQZXoznhduu4MVWfJF6GSyP6mMHMbbWa
.shell -&gt; https://tezos-dev.cryptonomic-infra.tech/ (alphanet)
.address -&gt; KT1HnvV5Z53naoh51jYvPF7w168nW8nfyx5v

Entrypoints
.transfer()
.approve()
.transfer_from()
.balance_of()
.allowance()
.create_account()
.create_accounts()

Helpers
.big_map_get()
.storage()
.using()
</code></pre>

<p>You can access contract storage at any block level, just pass block id into the <code>storage</code> method:</p>
<pre><code class="python">&gt;&gt;&gt; ci.storage(block_id='head~4096')
{'accounts': {},
 'version': 1,
 'total_supply': 1000,
 'decimals': 0,
 'name': 'Calamares',
 'symbol': 'PLA',
 'owner': 'tz1WWLRiCFnSzT1uXQYjJYaMVcUefrMxWT25'}
</code></pre>

<p>Under the hood PyTezos has parsed the storage type, collapsed all nested structures, converted annotations into keys,
and in the result we get a simple Python object which is much easier to manipulate. Take a look at the storage scheme -
it looks like Tezos RPC API generated docs.</p>
<pre><code class="python">&gt;&gt;&gt; ci.contract.storage
&lt;pytezos.michelson.contract.ContractStorage object at 0x7f5d1411f550&gt;

$storage:
    {
      &quot;accounts&quot;: { $address : $account , ... }  /* big_map */,
      &quot;version&quot;: $nat,
      &quot;total_supply&quot;: $nat,
      &quot;decimals&quot;: $nat,
      &quot;name&quot;: string,
      &quot;symbol&quot;: string,
      &quot;owner&quot;: $address
    }

$account:
    {
      &quot;balance&quot;: $nat,
      &quot;allowances&quot;: { $address : $nat , ... }
    }

$nat:
    int  /* Natural number */

$address:
    string  /* Base58 encoded `tz` or `KT` address */


Helpers
.big_map_decode()
.big_map_diff_decode()
.big_map_query()
.decode()
.default()
.encode()
</code></pre>

<h2 id="bigmap-lookup">BigMap lookup</h2>
<p>It looks like we are talking about some token,
let's take a peek at the <a href="https://better-call.dev/alpha/KT1HnvV5Z53naoh51jYvPF7w168nW8nfyx5v/operations">better-call.dev</a>
and query balance for an account from the big map.</p>
<pre><code class="python">&gt;&gt;&gt; ci.big_map_get('KT1FxfNNcmdEs3n38E1o2GcXhikmpGkyARDq')
{'balance': 45, 'allowances': {}}
</code></pre>

<p>Pretty cool, hah?</p>
<h2 id="call-entrypoint">Call entrypoint</h2>
<p>We can do the same using special entrypoint <code>balance_of</code>. Let's give a look at the interface:</p>
<pre><code class="python">&gt;&gt;&gt; ci.balance_of
&lt;pytezos.michelson.interface.ContractEntrypoint object at 0x7f4f0cc76e48&gt;

Properties
.key  # tz1cnQZXoznhduu4MVWfJF6GSyP6mMHMbbWa
.shell  # https://tezos-dev.cryptonomic-infra.tech/ (alphanet)
.address  # KT1HnvV5Z53naoh51jYvPF7w168nW8nfyx5v

$kwargs:
    {
      &quot;address&quot;: $address,
      &quot;nat_contract&quot;: $contract (nat)
    }

$contract:
    string  /* Base58 encoded `KT` address */

$address:
    string  /* Base58 encoded `tz` or `KT` address */
</code></pre>

<p>Apparently, we need to pass an address which balance we want to retrieve and a contract address having a single <code>nat</code>
parameter which will receive the balance (this is how view methods work in michelson).
Using <a href="https://github.com/baking-bad/conseilpy">conseilpy</a> we can find such contract
(for testing purposes, in order not to write our own).</p>
<pre><code class="python">&gt;&gt;&gt; ci.balance_of(
...    address='KT1FxfNNcmdEs3n38E1o2GcXhikmpGkyARDq',
...    nat_contract='KT1JTpEkByTStHYTT3qD8khJomNnvvnrfh4v')
&lt;pytezos.michelson.interface.ContractCall object at 0x7f4f0cc980b8&gt;

Properties
.key  # tz1cnQZXoznhduu4MVWfJF6GSyP6mMHMbbWa
.shell  # https://tezos-dev.cryptonomic-infra.tech/ (alphanet)

Payload
{'branch': 'BMDPbTmdsLnD1JBurPAqiYE45UDunYTBad2UWgCtg5bgyi2UFxu',
 'contents': [{'amount': '0',
               'counter': '715920',
               'destination': 'KT1HnvV5Z53naoh51jYvPF7w168nW8nfyx5v',
               'fee': '40364',
               'gas_limit': '400000',
               'kind': 'transaction',
               'parameters': {'args': [{'args': [{'args': [{'args': [{'args': [{'string': 'KT1FxfNNcmdEs3n38E1o2GcXhikmpGkyARDq'},
                                                                               {'string': 'KT1JTpEkByTStHYTT3qD8khJomNnvvnrfh4v'}],
                                                                      'prim': 'Pair'}],
                                                            'prim': 'Left'}],
                                                  'prim': 'Right'}],
                                        'prim': 'Right'}],
                              'prim': 'Right'},
               'source': 'tz1cnQZXoznhduu4MVWfJF6GSyP6mMHMbbWa',
               'storage_limit': '60000'}],
 'protocol': 'Pt24m4xiPbLDhVgVfABUjirbmda3yohdN82Sp9FeuAXJ4eV9otd',
 'signature': None}

Helpers
.cmdline()
.inject()
.operation_group
.using()
.with_amount()
</code></pre>

<p>What we got is a ready to inject operation group with encoded parameters.
In our case we just want to view data, so we can use <code>preapply</code> to see actual result.</p>
<pre><code class="python">&gt;&gt;&gt; ci.balance_of(address='KT1FxfNNcmdEs3n38E1o2GcXhikmpGkyARDq',
...               nat_contract='KT1JTpEkByTStHYTT3qD8khJomNnvvnrfh4v') \
...    .operation_group \
...    .sign() \
...    .preapply()
[{'contents': [{'kind': 'transaction',
    'source': 'tz1cnQZXoznhduu4MVWfJF6GSyP6mMHMbbWa',
    'fee': '40364',
    'counter': '715920',
    'gas_limit': '400000',
    'storage_limit': '60000',
    'amount': '0',
    'destination': 'KT1HnvV5Z53naoh51jYvPF7w168nW8nfyx5v',
    'parameters': {'prim': 'Right',
     'args': [{'prim': 'Right',
       'args': [{'prim': 'Right',
         'args': [{'prim': 'Left',
           'args': [{'prim': 'Pair',
             'args': [{'string': 'KT1FxfNNcmdEs3n38E1o2GcXhikmpGkyARDq'},
              {'string': 'KT1JTpEkByTStHYTT3qD8khJomNnvvnrfh4v'}]}]}]}]}]},
    'metadata': {'balance_updates': [{'kind': 'contract',
      &lt;...&gt;
     'internal_operation_results': [{'kind': 'transaction',
       'source': 'KT1HnvV5Z53naoh51jYvPF7w168nW8nfyx5v',
       'nonce': 0,
       'amount': '0',
       'destination': 'KT1JTpEkByTStHYTT3qD8khJomNnvvnrfh4v',
       'parameters': {'int': '45'},
       'result': {'status': 'applied',
        'storage': {'int': '45'},
        'consumed_gas': '12290',
        'storage_size': '86'}}]}}],
  'signature': 'sigsGCtnZKxWt4UD3HqkxPyemFTgeSVrgBDR4vawFBBFtLKok78JE8Jawn9VCp48ZZ9wYMZN52GhgZYHw8aCfk7fgAG5jMZS'}]
</code></pre>

<p>It worked! In the <code>internal_operation_results</code> we see a spawned transaction with parameters <code>{'int': '45'}</code></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="guide/" class="btn btn-neutral float-right" title="Developer guide">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
      
        <span style="margin-left: 15px"><a href="guide/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>

</body>
</html>

<!--
MkDocs version : 1.0.4
Build Date UTC : 2019-12-16 18:01:26
-->
